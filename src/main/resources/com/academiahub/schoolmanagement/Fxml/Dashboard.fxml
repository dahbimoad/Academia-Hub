<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.academiahub.schoolmanagement.Controllers.DashboardController"
            styleClass="dashboard-pane">

    <!-- Top Header -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" styleClass="header-pane">
            <padding>
                <Insets top="15" right="25" bottom="15" left="25"/>
            </padding>

            <!-- Logo -->
            <ImageView fitHeight="60" fitWidth="120">
                <image>
                    <Image url="@../images/ensa_tanger.png"/>
                </image>
            </ImageView>

            <!-- App Info -->
            <Label styleClass="app-info-label" text="School Management v1.0"/>

            <!-- User Info -->
            <HBox alignment="CENTER" HBox.hgrow="ALWAYS" spacing="15">
                <ImageView fx:id="userAvatar" fitHeight="40" fitWidth="40" visible="false" managed="false" style="-fx-image: url('@../images/default_avatar.png');"/>
                <VBox alignment="CENTER_LEFT">
                    <Label fx:id="welcomeLabel" styleClass="welcome-title"/>
                    <Label fx:id="roleLabel" styleClass="role-label"/>
                </VBox>
            </HBox>

            <!-- Logout Button -->
            <HBox alignment="CENTER_RIGHT" HBox.hgrow="ALWAYS">
                <Button text="Déconnexion" onAction="#handleLogout" styleClass="logout-button">
                    <graphic>
                        <FontIcon iconLiteral="fas-sign-out-alt" iconSize="16"/>
                    </graphic>
                </Button>
            </HBox>
        </HBox>
    </top>

    <!-- Left Sidebar Menu -->
    <left>
        <VBox styleClass="sidebar" spacing="10">
            <padding>
                <Insets top="20" right="15" bottom="20" left="15"/>
            </padding>

            <!-- Admin Menu Items -->
            <VBox fx:id="adminMenu" spacing="5" managed="false" visible="false">
                <Button text="Gestion des Étudiants" onAction="#handleStudentManagement" styleClass="menu-button">
                    <graphic>
                        <FontIcon iconLiteral="fas-graduation-cap" iconSize="14"/>
                    </graphic>
                    <padding><Insets right="5"/></padding>
                </Button>
                <Button text="Gestion des Professeurs" onAction="#handleTeacherManagement" styleClass="menu-button">
                    <graphic>
                        <FontIcon iconLiteral="fas-users" iconSize="14"/>
                    </graphic>
                    <padding><Insets right="5"/></padding>
                </Button>
                <Button text="Gestion des Modules" onAction="#handleModuleManagement" styleClass="menu-button">
                    <graphic>
                        <FontIcon iconLiteral="fas-book" iconSize="14"/>
                    </graphic>
                    <padding><Insets right="5"/></padding>
                </Button>
                <Button text="Gestion des Utilisateurs" onAction="#handleUserManagement" styleClass="menu-button">
                    <graphic>
                        <FontIcon iconLiteral="fas-user-cog" iconSize="14"/>
                    </graphic>
                    <padding><Insets right="5"/></padding>
                </Button>
                <Button text="Tableau de Bord" onAction="#handleDashboardStats" styleClass="menu-button">
                    <graphic>
                        <FontIcon iconLiteral="fas-chart-bar" iconSize="14"/>
                    </graphic>
                    <padding><Insets right="5"/></padding>
                </Button>
            </VBox>

            <!-- Secretary Menu Items -->
            <VBox fx:id="secretaryMenu" spacing="5" managed="false" visible="false">
                <Button text="Gestion des Étudiants" onAction="#handleStudentManagement" styleClass="menu-button">
                    <graphic>
                        <FontIcon iconLiteral="fas-graduation-cap" iconSize="14"/>
                    </graphic>
                    <padding><Insets right="5"/></padding>
                </Button>
                <Button text="Gestion des Inscriptions" onAction="#handleEnrollmentManagement" styleClass="menu-button">
                    <graphic>
                        <FontIcon iconLiteral="fas-envelope-open" iconSize="14"/>
                    </graphic>
                    <padding><Insets right="5"/></padding>
                </Button>
                <Button text="Liste des Modules" onAction="#handleModuleList" styleClass="menu-button">
                    <graphic>
                        <FontIcon iconLiteral="fas-list-ul" iconSize="14"/>
                    </graphic>
                    <padding><Insets right="5"/></padding>
                </Button>
            </VBox>

            <!-- Professor Menu Items -->
            <VBox fx:id="professorMenu" spacing="5" managed="false" visible="false">
                <Button text="Mes Modules" onAction="#handleMyModules" styleClass="menu-button">
                    <graphic>
                        <FontIcon iconLiteral="fas-book" iconSize="14"/>
                    </graphic>
                    <padding><Insets right="5"/></padding>
                </Button>
                <Button text="Liste des Étudiants" onAction="#handleStudentList" styleClass="menu-button">
                    <graphic>
                        <FontIcon iconLiteral="fas-user-graduate" iconSize="14"/>
                    </graphic>
                    <padding><Insets right="5"/></padding>
                </Button>
            </VBox>
        </VBox>
    </left>

    <!-- Main Content Area -->
    <center>
        <StackPane fx:id="contentArea" styleClass="content-area">
            <!-- Default welcome message -->
            <VBox alignment="CENTER" spacing="20">
                <Label text="Bienvenue dans le système de gestion scolaire" styleClass="welcome-title"/>
                <Label text="Bienvenue dans le système de gestion scolaire" styleClass="welcome-subtitle"/>
            </VBox>
        </StackPane>
    </center>
</BorderPane>