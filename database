-- Create Tables
CREATE TABLE etudiants (
    id SERIAL PRIMARY KEY,
    matricule VARCHAR(20) UNIQUE NOT NULL,
    nom VARCHAR(50) NOT NULL,
    prenom VARCHAR(50) NOT NULL,
    date_naissance DATE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    promotion VARCHAR(20) NOT NULL
);

CREATE TABLE professeurs (
    id SERIAL PRIMARY KEY,
    nom VARCHAR(50) NOT NULL,
    prenom VARCHAR(50) NOT NULL,
    specialite VARCHAR(100) NOT NULL
);

CREATE TABLE modules (
    id SERIAL PRIMARY KEY,
    nom_module VARCHAR(100) NOT NULL,
    code_module VARCHAR(20) UNIQUE NOT NULL,
    professeur_id INTEGER REFERENCES professeurs(id)
);

CREATE TABLE inscriptions (
    id SERIAL PRIMARY KEY,
    etudiant_id INTEGER REFERENCES etudiants(id),
    module_id INTEGER REFERENCES modules(id),
    date_inscription DATE NOT NULL DEFAULT CURRENT_DATE,
    UNIQUE(etudiant_id, module_id)
);

CREATE TABLE utilisateurs (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(100) NOT NULL,
    role VARCHAR(20) NOT NULL CHECK (role IN ('ADMIN', 'SECRETAIRE', 'PROFESSEUR'))
);



SELECT setval('utilisateurs_id_seq', (SELECT MAX(id) FROM utilisateurs) + 1);